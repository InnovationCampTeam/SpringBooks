<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/html">
<head>
    <meta charset="UTF-8">

    <title>Title</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <link rel="stylesheet" href="/css/bootstrap.min.css">
    <link rel="stylesheet" href="/css/custom.css">

    <script>
        $(document).ready(function () {
            // HTML 문서를 로드할 때마다 실행합니다.
            getMessages();
        })

        function writePost() {
            // 1. 작성한 메모를 불러옵니다.
            let title = $('#title').val();
            let author = $('#author').val();
            let language = $('#language').val();
            let publisher = $('#publisher').val();
            let resistDate = $('#resistDate').val();

            // 2. 작성한 메모가 올바른지 isValidContents 함수를 통해 확인합니다.
            // if (isValidContents(contents) == false) {
            //     return;
            // }
            // 3. genRandomName 함수를 통해 익명의 username을 만듭니다.
            // let username = genRandomName(10);

            // 4. 전달할 data JSON으로 만듭니다.
            let data = {'title': title,
                'author': author,
                'language': language,
                'publisher': publisher,
                'resistDate': resistDate,
            };

            // 5. POST /api/memos 에 data를 전달합니다.
            $.ajax({
                type: "POST",
                url: "/api/books",
                contentType: "application/json",
                data: JSON.stringify(data),
                success: function (response) {
                    console.log(response);
                    alert('메시지가 성공적으로 작성되었습니다.');
                    window.location.reload();
                }
            });
        }

        function getMessages(){
            $('#cards-box').empty();
            addHTML();
        }
        function addHTML() {
            // 1. HTML 태그를 만듭니다.
            let tempHtml = `<div class="list-group-item">
                        <div class="list-group">
                            <table  id="cards-box" class="table">
                                <tbody>
                                <tr>
                                    <th class="mobile" scope="col" style="width: 60px; text-align: center;">번호</th>
                                    <th scope="col" style="text-align: center;">제목</th>
                                    <th class="mobile" scope="col" style="width: 80px; text-align: center;">작성자</th>
                                    <th class="mobile" scope="col" style="width: 120px; text-align: center;">작성일</th>
                                </tr>
                                <tr>
                                    <th class="mobile" scope="row" style="text-align: center;">3</th>
                                    <td>종합소득세 20% 할인 이벤트입니다!</td>
                                    <td class="mobile" style="text-align: center;">운영자</td>
                                    <td class="mobile" style="text-align: center;">2018-01-08</td>
                                </tr>
                                <tr>
                                    <th class="mobile" scope="row" style="text-align: center;">2</th>
                                    <td>신규 회원 포인트 적립 이벤트가 시작됩니다.</td>
                                    <td class="mobile" style="text-align: center;">운영자</td>
                                    <td class="mobile" style="text-align: center;">2018-01-07</td>
                                </tr>
                                <tr>
                                    <th class="mobile" scope="row" style="text-align: center;">1</th>
                                    <td>사이트 개설 수수료 10% 이벤트입니다.</td>
                                    <td class="mobile" style="text-align: center;">운영자</td>
                                    <td class="mobile" style="text-align: center;">2018-01-05</td>
                                </tr>
                                <tr>
                                    <td colspan="4"><button class="btn btn-success" data-toggle="modal" data-target="#modal">이벤트 추가</button></td>
                                </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>`;
            // 2. #cards-box 에 HTML을 붙인다.
            $('#cards-box').append(tempHtml);
        }
    </script>

</head>
<body>
    <nav class="navbar navbar-expand-lg navbar-dark bg-primary">
    <a class="navbar-brand" href="./index.html">관리자 페이지</a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar"
            aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
    </button>
        <div class="collapse navbar-collapse justify-content-between" id="navbar">
            <div class="navbar-nav">
                <a class="nav-item nav-link active" href="./index.html">대시보드</a>
                <a class="nav-item nav-link" href="./event.html">이벤트</a>
                <a class="nav-item nav-link" href="./blog.html">블로그</a>
                <a class="nav-item nav-link" href="./user.html">회원</a>
            </div>
        </div>
    </nav>
        <div class="container">
            <div class="col-md-9">
                <div class="list-group">
                    <a href="#" class="list-group-item active">이벤트 목록</a>
                    <div class="list-group-item">
                        <div class="list-group">
                            <table  id="cards-box" class="table">
                                <tbody>
                                <tr>
                                    <th class="mobile" scope="col" style="width: 60px; text-align: center;">번호</th>
                                    <th scope="col" style="text-align: center;">제목</th>
                                    <th class="mobile" scope="col" style="width: 80px; text-align: center;">작성자</th>
                                    <th class="mobile" scope="col" style="width: 120px; text-align: center;">작성일</th>
                                </tr>
                                <tr>
                                    <th class="mobile" scope="row" style="text-align: center;">3</th>
                                    <td>종합소득세 20% 할인 이벤트입니다!</td>
                                    <td class="mobile" style="text-align: center;">운영자</td>
                                    <td class="mobile" style="text-align: center;">2018-01-08</td>
                                </tr>
                                <tr>
                                    <th class="mobile" scope="row" style="text-align: center;">2</th>
                                    <td>신규 회원 포인트 적립 이벤트가 시작됩니다.</td>
                                    <td class="mobile" style="text-align: center;">운영자</td>
                                    <td class="mobile" style="text-align: center;">2018-01-07</td>
                                </tr>
                                <tr>
                                    <th class="mobile" scope="row" style="text-align: center;">1</th>
                                    <td>사이트 개설 수수료 10% 이벤트입니다.</td>
                                    <td class="mobile" style="text-align: center;">운영자</td>
                                    <td class="mobile" style="text-align: center;">2018-01-05</td>
                                </tr>
                                <tr>
                                    <td colspan="4"><button class="btn btn-success" data-toggle="modal" data-target="#modal">도서 등록</button></td>
                                </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    <div class="modal fade" id="modal" tabindex="-1" role="dialog" aria-labelledby="modal" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">도서 등록</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <form>
                        <div class="form-group">
                            <label>제목</label>
                            <input type="text" class="form-control" id="title">
                        </div>
                        <div class="form-group">
                            <label>저자</label>
                            <input type="text" class="form-control" id="author">
                        </div>
                        <div class="form-group">
                            <label>언어</label>
                            <input type="text" class="form-control" id="language">
                        </div>
                        <div class="form-group">
                            <label>출판사</label>
                            <input type="text" class="form-control" id="publisher">
                        </div>
                        <div class="form-row">
                            <label>등록일</label>
                            <input class="form-control" id="resistDate" type="datetime-local" value="2024-07-02T00:00:00">
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-dismiss="modal">취소</button>
                            <button type="button" onclick="writePost()" class="btn btn-primary">등록하기</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>


        <!-- 제이쿼리 자바스크립트 추가하기 -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
        <!-- Popper 자바스크립트 추가하기 -->
        <script src="/js/popper.min.js"></script>
        <!-- 부트스트랩 자바스크립트 추가하기 -->
        <script src="/js/bootstrap.min.js"></script>




</body>
</html>